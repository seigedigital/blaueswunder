<!DOCTYPE html>
<html lang="de">
  <head>
    <title>Blaues Wunder</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="/assets/favicon.ico" type="image/png" sizes="16x16">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="mask-icon" href="/assets/favicon.svg" color="#FFFFFF">
    <meta name="theme-color" content="#ffffff">
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js'></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js'></script>
  </head>
  <body>
    <br><br>
    <label for="latitude">Latitude:</label>
    <input type="number" id="latitude" step="0.000001">
    <br>
    <label for="longitude">Longitude:</label>
    <input type="number" id="longitude" step="0.000001">
    <br>
    <label for="scale">Scale:</label>
    <input type="number" id="scale">
    <br><br>
    <button id="refresh-btn">Refresh</button>
    <br><br>
    <a-scene
      vr-mode-ui='enabled: false'
      renderer="logarithmicDepthBuffer: true;"
      embedded
      loading-screen="enabled: false;"
      arjs="sourceType: webcam; debugUIEnabled: false;"
    >
      <a-assets>
        <a-asset-item
            id="animated-asset"
            src="assets/bridge-v2.glb"
        ></a-asset-item>
      </a-assets>

<!--
      Test: 51.32991924957895, 12.370477114226233
      Real: 51.344253, 12.371818
-->
        
      <a-entity
          id="entity"
          look-at="[gps-camera]"
          animation-mixer="loop: repeat"
          gltf-model="#animated-asset"
          scale="2000 2000 2000"
          gps-entity-place="latitude: 51.32991924957895; longitude: 12.370477114226233;"
      ></a-entity>
      <a-entity material='color: blue' geometry='primitive: box' gps-new-entity-place="latitude: 51.32991924957895; longitude: 12.370477114226233" scale="10 10 10"></a-entity>
      <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
      document.getElementById("refresh-btn").addEventListener("click", function() {
        const latitudeInput = document.getElementById("latitude");
        const longitudeInput = document.getElementById("longitude");
        const scaleInput = document.getElementById("scale");
        const entityItem = document.getElementById("entity");

        entityItem.setAttribute("gps-new-entity-place", `latitude: ${latitudeInput.value}; longitude: ${longitudeInput.value}`);
        entityItem.setAttribute("scale", `${scaleInput.value} ${scaleInput.value} ${scaleInput.value}`);
      });
    </script>
  </body>
</html>
