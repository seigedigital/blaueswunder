<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Compass</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <a-scene embedded arjs="sourceType: webcam;">
    <a-entity camera></a-entity>
    <a-entity id="compass" position="0 0 -5">
      <a-text id="direction-text" value="N" color="red" position="0 0 0"></a-text>
    </a-entity>
  </a-scene>

  <script>
    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', function(event) {
        const compass = document.getElementById('compass');
        const directionText = document.getElementById('direction-text');
        const alpha = event.alpha;

        compass.setAttribute('rotation', `0 ${alpha} 0`);

        let direction = 'N';
        if (alpha > 45 && alpha <= 135) {
          direction = 'E';
        } else if (alpha > 135 && alpha <= 225) {
          direction = 'S';
        } else if (alpha > 225 && alpha <= 315) {
          direction = 'W';
        }

        directionText.setAttribute('value', direction);
      }, true);
    } else {
      alert("DeviceOrientation is not supported on your device.");
    }
  </script>
</body>
</html>
